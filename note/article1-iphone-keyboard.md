# iPhone をキーボードにしてみた

<<画像：iPhone と XIAO だけで PC 操作をしている様子。物理キーボードは見当たらない>>

## つくったきっかけ

面白い自作キーボードのネタを考えてたら思った。

「iPhone で PC 操作できたら面白くない？」

まじで深い理由とかない。ただ手元にある iPhone を見て、これがキーボードになったら楽しそうだなーって。いつも持ち歩いてるし、画面もまあまあでかいし、タッチ操作も慣れてるし。そんな軽い気持ちで作り始めた。

最初は単純に「作れるかな」ってチャレンジのつもりだった。でも実際に作ってみたら、思ったよりは実用的で。

で、作ったやつを Twitter に投げたら意外と反応があって。

「AR グラスと組み合わせたい」
「Vision Pro でこれ使いたい」
「電車で作業するのに良さそう」

とか言われて、なるほどなーって。確かに AR グラスで画面は見えるけど、キーボードどうすんのって話はあるよね。物理キーボード持ち歩くのはだるいし、バーチャルキーボードは打ちづらいし。そこで iPhone 使えたら全部ワイヤレスで完結するし、結構アリかもしれない。

実際、AR デバイスが普及したときの入力問題って結構深刻だと思う。画面は無限に広げられても、入力デバイスは物理的な制約から逃れられない。ハントラもあるけど、細かい操作にはまだまだ難しい。でも iPhone なら誰でも持ってるし、使い慣れてるし、これを入力デバイスとして使えれば一気に解決する。

## どうやって動いてるの

<<画像：iPhone、XIAO nRF52840、PC（AR グラス）の接続構成図>>

仕組みは超シンプル。

```
iPhone → Bluetooth → XIAO → USB有線 → PC（ARグラス）
```

XIAO が中継機としてキーコードを PC に流し込んでるという超シンプル構成。iPhone アプリでタップとかフリックとかの操作を検知して、それを Bluetooth で XIAO に送る。XIAO はそれを USB HID の信号に変換して PC に送る。PC から見たら普通の USB キーボード・マウスが接続されてるのと同じ。

なんで直接 iPhone と PC をつながないのかって言うと、iOS の制限があるから。iPhone を直接 HID デバイスにすることは現状できない。だから間に XIAO を挟んで変換してる。ちょっと面倒だけど、これのおかげでどんな PC でも使えるようになった。

（mac アプリ作って iPhone からそのアプリに通信すればできるんだけど、今回はどのデバイスでも使える自作キーボード的なノリなのでそういうコンセプト的に除外）

### 用意するもの

iPhone と、XIAO nRF52840 Sense っていう小さいマイコンがあれば OK。XIAO は親指の爪くらいのサイズで値段は 3000 円くらい。あとは USB-C ケーブルで PC につなぐだけ。

<<画像：XIAO nRF52840 の実物写真。iPhone 15 と比較したサイズ感>>

ちっさ。マジでちっさ。

XIAO を選んだ理由は、Bluetooth と USB HID の両方に対応してて、Arduino で簡単にプログラムできるから。しかもこのサイズ。ポケットに入れても邪魔にならないし、PC の USB ポートに挿しっぱなしでも目立たない。電源も USB から取るから充電とか考えなくていい。

### つなぎ方

1. XIAO を PC の USB に挿す
2. iPhone でアプリ起動
3. Bluetooth でペアリング

以上。マジでこれだけ。

PC 側は何もしなくていい。XIAO が普通の USB キーボード・マウスとして認識されるから、ドライバとか要らない。Windows でも Mac でも Linux でも、挿したら即使える。これ地味に便利。

初回のペアリングだけ必要だけど、一度つないだらあとは自動接続。アプリ起動したら勝手につながる。接続が切れても自動で再接続するようにしてあるから、使い勝手はかなりいい。Bluetooth の範囲内（だいたい 10m くらい）なら、どこからでも PC 操作できる。

## で、何ができるの？

### AR グラスと組み合わせたら最高かも

<<画像：電車の座席で AR グラスと iPhone だけで作業している想像図>>

電車で AR グラス使うときとか良さそう。PC はカバンに入れたまま、iPhone だけ手に持って作業。物理キーボード膝に置かなくていいし、狭い座席でも余裕。

隣の人に肘がぶつかる心配もないし、キーボードがガタガタ揺れることもない。iPhone なら片手で持てるから、つり革つかみながらでも操作できる。将来 AR グラスが普及したら、満員電車でも仕事できるようになるかも。

### カフェでも使える

<<画像：小さなカフェのテーブルで、AR グラスと iPhone だけで作業している想像図>>

狭いカフェのテーブルでも余裕。AR グラスなら画面は他人に見えないし、iPhone タイピングなら音も静か。

実はこれ、プライバシーの面でもめちゃくちゃいい。普通のノート PC だと隣から画面丸見えだけど、AR グラスなら自分にしか見えない。機密情報扱ってる人とか、カフェで仕事したいけど画面見られたくない人には最高だと思う。しかもキーボードの音もしないから、周りの迷惑にもならない。

### 立ったままでも OK

<<画像：立ちながら AR グラスで画面を見て、iPhone で操作している想像図>>

キーボード置く場所いらないから、立ったまま作業もできる。移動しながらでも使えるのは地味に便利。

展示会とかイベントで立ち話しながらメモ取るときとか、工場とか倉庫で立ち作業しながらデータ入力するときとか、今まで不可能だった場所でも PC 作業ができるようになる。歩きながらでも使えるから、移動時間も無駄にならない。まあ、歩きスマホと同じ問題はあるけどね。

## iPhone アプリの機能

<<画像：iPhone アプリの画面。テキスト入力、キーボード、マウスの 3 つのモード切り替え>>

### キーボード

普通の仮想キーボードで文字打てる。フリック入力もできる（これについては後で詳しく書く）。Backspace とか Enter とか Tab とかも使えるようにした。

QWERTY 配列の仮想キーボードは iOS 標準のやつをそのまま使ってる。だから普段 iPhone で打ってる感覚そのままで PC に文字入力できる。予測変換も使えるし、絵文字も送れる。ただし、PC 側で絵文字が表示できるかは別問題だけど。

特殊キーも一通り実装した。Ctrl とか Alt とかのモディファイアキーはまだだけど、基本的な文字入力には困らないレベル。

### マウス

iPhone の画面をトラックパッドみたいに使える。指でなぞってカーソル移動。画面の右端をスワイプすると縦スクロール。

クリックは全部対応した。左も右もダブルクリックも中クリックも。カーソル速度も変えられるし、タップでクリックする機能も ON/OFF できるようにしてある。

このトラックパッドモード、思ったよりは使える。

スクロールは画面右端に専用エリア作った。ここを上下にスワイプすると、PC の画面がスクロールする。Web ページ見るときとか、長い文書読むときに便利。

<<画像：iPhone でトラックパッド操作をしている手元と、PC 画面でカーソルが動いている様子>>

### フリック入力もできる

<<画像：iPhone のフリック入力画面と、PC に文字が入力されている様子>>

これ、個人的に一番推したい機能。

iPhone のフリック入力で PC に文字打てるようにした。最初はネタで実装したんだけど、使ってみた割と便利っぽい。人によっては日本語打つときは QWERTY より速いまである。自分はスマホを QWERTY 派なのであまりうまくはない。

普段スマホでフリック入力してる人ならわかると思うけど、慣れたらマジで速い。「ありがとうございます」とか一瞬で打てる。PC のキーボードだと両手使って「a r i g a t o u g o z a i m a s u」って打つところを、片手でサクッと「あ → り → か → と → う → こ → さ → い → ま → す」で終わり。変換も iPhone 側でやるから、使い慣れた変換候補が出てくる。

最近は若い人には PC の入力よりフリックが速いという人も多いらしいし、結構役立ちそう。

どうやって動いてるかっていうと、iPhone でフリック操作したら、それを検知してどの文字か判定して、XIAO に送る。XIAO はそれを USB キーボードの信号に変換して PC に送る。PC からしたら普通のキーボード入力と変わらない。

```
フリック → ローマ字に分解 → Bluetooth → XIAO → USB → PC
```

カーソル移動とか削除もフリックでできるようにした。左フリックで一文字削除、長押しで連続削除、上下フリックでカーソル移動みたいな感じ。基本的な文字編集は全部フリックで完結する。

AR グラスと組み合わせるとマジで良さそう。電車とか立ったままとか、キーボード置けない場所でも普通に文字打てる。片手で持てるから、もう片手でコーヒー飲みながらとか、つり革つかみながらとか、今まで無理だったシチュエーションでも文字入力できる。

## 今後やりたいこと

<<画像：GitHub リポジトリのスクリーンショット>>

コードは GitHub に上げてる。
https://github.com/takahashinaoki/SmartphoneKeyboardConnector

興味ある人は見てみて。

### やりたいこと

有線なくしたい。XIAO と PC も Bluetooth でつなげたら完全ワイヤレスになる。今は USB 必須だけど、これがなくなったらもっと便利になるはず。技術的には可能なんだけど、Bluetooth HID の実装がちょっと面倒で後回しにしてる。

あと、ジェスチャー操作も追加したい。iPhone を振ったら Undo とか、2 本指スワイプで Alt+Tab とか。AR グラスと組み合わせたときに、画面見ながら直感的に操作できたら最高だと思う。

それから、iPhone の IME をもっと活用したい。今は単純に文字を送ってるだけだけど、iPhone 側で変換した文字を直接 PC に送れたら、PC 側の IME 要らなくなる。これができたら「持ち運べる IME」として、どの PC でも自分好みの日本語入力ができるようになる。

あとなぜこれを作ったのかだけど、自作キーボードのシミュレーションをしたくて作り始めた部分もある。自作キーボードはレイアウトが大事。でも実際に 3DP で作ったモックを使って試すとかすとか少しめんどい。なので作りたい配列を入れたら iPad とかで原寸でキーボードを表示し入力を試せるとかそういう感じにしたい。分割キーボードなら、相当大きくない限りは iPad に収まるサイズだからこれによってよりレイアウトの検討がしやすくなるはず。

## おわり

作ってて楽しかったから、App Store に出すかも。需要あるかわからんけど、XREAL ユーザーが使うかもだしね。

実際使ってみて思ったのは、物理的な入力デバイスの制約から解放されるって、想像以上に快適だってこと。場所を選ばない、音がしない、片手で操作できる。これだけでも作業環境がだいぶ変わる。

AR グラスが当たり前になる未来でまだハンドトラッキングとかに難があるうちは、こういう入力方法が標準になるかもしれない。

そういえば最近 iOSDC で見た「iPhone を光学マウスにする」って発表がヤバかった。カメラで移動量検知してマウス入力にするとか天才すぎる。自分も作ってみたい。そのうち YouTube で公開されるらしいから気になる人は見てみて。

https://fortee.jp/iosdc-japan-2025/proposal/1e4c3e3b-2731-4b0c-9990-d56f11760f6c

というわけで、iPhone をキーボードにする話でした。試したい人は GitHub 見てね。
