# iPhone をワイヤレスキーボード・マウスにする

<<画像：iPhone と XIAO だけで PC 操作をしている様子。物理キーボードは見当たらない>>

## きっかけ：iPhone がキーボードになったら面白くない？

最初は単純な思いつきだった。

「iPhone をキーボードにして PC 操作できたら面白そうじゃん？」

特に深い理由があったわけじゃない。ただなんとなく、いつも持ち歩いている iPhone で PC を操作できたら便利そうだなと思った程度。まあ、作ってみるか、という軽いノリで始めた。

実際に作って SNS に投稿してみると、思いがけない反応があった。

「AR グラスと組み合わせたら最強じゃない？」
「Vision Pro でこれ使えたら便利そう」
「電車内での PC 作業が革命的に変わりそう」

なるほど、AR デバイスと組み合わせる用途は確かに面白い。AR グラスがあれば大画面は確保できるけど、入力デバイスはどうしても物理的な制約が残る。そこに iPhone をキーボード・マウスとして使えれば、完全にワイヤレスな作業環境が実現できる。

でも実際に使ってみて分かったのは、AR グラス以外でも普通に便利だということ。そして開発を進めるうちに、この仕組みが単なるキーボード代替ではなく、「持ち運べる IME」という全く新しい可能性を秘めていることに気づいた。

## 仕組みはシンプル

<<画像：iPhone、XIAO nRF52840、PC（AR グラス）の接続構成図>>

接続は 3 ステップ：

```
iPhone → Bluetooth → XIAO → USB有線 → PC（ARグラス）
```

### 必要なもの

- **iPhone**: 普通の iPhone アプリで操作
- **XIAO nRF52840 Sense**: 名刺サイズの小型マイコン（3000 円くらい）
- **PC**: Windows、Mac、Linux 何でも OK
- **USB-C ケーブル**: XIAO を PC に接続するため

<<画像：XIAO nRF52840 の実物写真。iPhone 15 と比較したサイズ感>>

### 接続手順

1. **XIAO を PC に接続**: USB ポートに挿すだけで自動認識
2. **iPhone アプリを起動**: Bluetooth 権限を許可
3. **ペアリング**: アプリから XIAO デバイスを選択

**PC 側は設定ゼロ。** XIAO が普通の USB キーボード・マウスとして認識されるので、ドライバーインストールも特別なソフトも一切不要。Windows、Mac、Linux どれでも挿した瞬間から使える。

## 実際どんな感じで使えるの？

### AR デバイス + iPhone = 便利そうな組み合わせ

<<画像：電車の座席で AR グラスと iPhone だけで作業している想像図>>

将来、通勤電車で AR デバイスを使うとき、これが便利になりそう。PC 本体はリュックの中、手元には iPhone だけ。物理キーボードを膝の上に置く必要がないから、狭い座席でも快適に作業できるはず。

### カフェでの作業も楽になりそう

<<画像：小さなカフェのテーブルで、AR グラスと iPhone だけで作業している想像図>>

狭いカフェのテーブルでも大丈夫そう。AR グラスの画面は他人から見えないし、iPhone での入力なら音も静か。周りに迷惑もかけない。

### 立ち作業もできそう

<<画像：立ちながら AR グラスで画面を見て、iPhone で操作している想像図>>

物理キーボードがないから、立ったまま作業することも可能になりそう。移動しながらでも作業を続けられる。

## iPhone でできること

<<画像：iPhone アプリの画面。テキスト入力、キーボード、マウスの 3 つのモード切り替え>>

### テキスト入力機能

- **直接テキスト入力**: テキストフィールドに入力して Send ボタンで送信
- **日本語変換**: iOS 標準の IME で変換してから PC 側に送信
- **Unicode 直接送信**: 漢字などキーイベントでは送れない文字も直接送信可能

### キーボード機能

- **仮想キーボード**: 画面下部に表示される仮想キーボードでタイピング
- **文字キー、数字キー**: 基本的な文字・数字入力
- **特殊キー**: Backspace、Enter、Tab キーに対応

### マウス機能

- **トラックパッド**: iPhone 画面をタッチパッドとして使用してカーソル移動
- **スクロールストリップ**: 画面右端の専用エリアで縦スクロール
- **クリック操作**: 左クリック、右クリック、ダブルクリック、中クリック対応
- **感度調整**: カーソル速度の調整機能
- **タップでクリック**: トラックパッドをタップして左クリック（ON/OFF 可能）

<<画像：iPhone でトラックパッド操作をしている手元と、PC 画面でカーソルが動いている様子>>

## AR グラス以外でも意外と便利

AR グラスでの利用が主目的だったけど、使ってみると他の場面でも便利そう。

### 大画面での作業

リビングの TV で PC 作業する時、ソファから離れずに iPhone で操作できるのが楽。

### プレゼンでのリモート操作

会議でプロジェクターから離れた場所にいても、iPhone でスライド操作や資料のスクロールができる。手元で操作しながら聞き手の方を向いて話せるのがいい。

## 技術的な良いところ

### 遅延がほとんどない

リモートデスクトップアプリとは違って、キー入力が直接 USB 信号になるから、遅延を感じない。AR グラスでの作業に最適だし、速度的には実用レベルだと感じる。

### どこでも使える

USB HID 標準だから、PC 以外にもスマート TV、ゲーム機など、USB 入力を受け付ける機器なら何でも制御できる。

### 慣れた操作感

iPhone の標準機能（キーボード、タッチ操作）をそのまま使えるから、新しい操作を覚える必要がない。

## Unicode 送信が予想以上に便利だった

<<画像：iPhone で漢字混じりの日本語を入力して、PC 画面に直接表示されている様子>>

開発当初は思ってなかったけど、Unicode 文字を直接送信できることで、日本語の漢字や特殊文字もそのまま PC 側に送れるのが便利。

キーボードデバイスとして送れるのはキーコードに限られてしまうの。英字や数字・記号などすごい少ない。漢字とかは基本送れないのだが、これを UNICODE にしておくって、PC 側で復号すればいいというのは結構面白い。

## 現状と今後の予定

<<画像：GitHub リポジトリのスクリーンショット>>

GitHub（https://github.com/takahashinaoki/SmartphoneKeyboardConnector）でオープンソース公開中。

## 使っていて気づいた新しい価値：「持ち運べる IME」

最初は面白いだろうなくらいで作ったけど、ここから発展を考えた。

**これは「持ち運べる IME」だ。**

### 従来の IME の問題を図で理解する

<<画像：従来の IME 問題を示す図>>

```
【従来のPC環境】

会社のPC     家のPC      友人のPC
┌─────┐   ┌─────┐   ┌─────┐
│IME学習  │   │IME学習  │   │IME学習  │
│データA  │   │データB  │   │データC  │
│(リセット)│   │(リセット)│   │(リセット)│
└─────┘   └─────┘   └─────┘
     ↑           ↑           ↑
   毎回ゼロ    毎回ゼロ    毎回ゼロ
   から学習    から学習    から学習
```

**問題**: PC を変える度に、IME の学習がリセットされる

### 持ち運べる IME のコンセプト

<<画像：持ち運べる IME の仕組みを示すフロー図>>

```
【持ち運べるIME方式】

     iPhone
   ┌─────────┐
   │   自分の    │
   │ IME学習データ │  ←── いつも持ち歩いている
   │  (蓄積継続)  │
   └─────────┘
        ↓
    文字変換完了
        ↓
   ┌─────────┐
   │「こんにちは」 │  ←── 変換済みの文字
   └─────────┘
        ↓ (Bluetooth + USB)
   ┌─────────┐
   │  どのPCでも  │
   │  同じ精度で  │  ←── PC側は受け取るだけ
   │   入力可能   │
   └─────────┘
```

### 革新的なポイント

従来は「PC で IME 処理」が当たり前だった。でもこの方式では：

1. **iPhone 側で日本語変換を完了**

   - 「おはよう」→ iPhone で変換 →「おはよう」
   - 「きょう」→ iPhone で変換 →「今日」

2. **変換済みの文字を PC 側に送信**

   - PC 側はただ受け取るだけ
   - ドライバ不要、設定不要

3. **どの PC でも同じ IME 体験**
   - 会社でも家でも友人宅でも
   - 自分の iPhone の学習データをそのまま活用

<<画像：複数の PC で同じ iPhone の IME を使っている様子>>

```
iPhone（1台） → 会社PC、家PC、友人PC すべてで同じ変換精度
```

**結果**: PC ごとに IME を育て直す不便さから、完全に解放される。

### スマホを「持ち運べる IME 専用マシン」にするという発想

ここで重要なのは、考え方の転換だ。

従来は「PC で IME を動かす」のが当たり前だった。でもこの方式では「iPhone を IME 専用の端末として使う」。つまり、**スマホが持ち運べる IME 専用コンピューターになる**。

これがどれだけ革新的かというと：

#### PC の IME の制約

- CPU・メモリはメインアプリ（Word、ブラウザなど）が最優先
- IME は「脇役」として、わずかなリソースしか使えない
- 重い変換処理をすると、メインアプリが遅くなる
- だから高度な AI 変換は実質的に不可能

これは azooKey on macOS とかの開発に携わってだいぶ実感していた。結構計算リソースはカツカツだし、それこそ少なければ少ない方がいい。

#### iPhone を IME 専用マシンにした場合

- **iPhone 全体のパワーを文字変換だけに使える**
- 強力な CPU・GPU・Neural Engine を入力処理に集中投入
- メインアプリとの競合がないので、どれだけ重い処理でも OK
- 巨大な機械学習モデルも自由に動かせる

**要するに、iPhone という高性能コンピューターを、まるごと自分専用の IME マシンにできる。** こんな贅沢な文字入力環境は、これまで存在しなかった。

しかもそれを、どの PC でも、USB に挿すだけで使えるようになる。

### Google の湯呑みキーボードからヒントを得た

<<画像：Google の湯呑みキーボードの写真>>

実はこの Unicode 送信のアイデア、Google の「湯呑みキーボード」（エイプリルフール企画）からヒントを得た。以前、これに魅了されて実際に自作したことがある（[制作記事](https://note.com/electrical_cat/n/n87f1e3d7255c)）。

<<画像：自作した湯呑みキーボードの写真>>

この時に発見したのが、Google 日本語入力の「Unicode から変換」機能。これを使えば、通常のキーイベントでは送信できない漢字や特殊文字も、Unicode 文字コードを直接送ることで入力できる。

つまり、物理的なキー配列の制約を完全に取り除けるということ。

<<画像：フリック入力で「ありがとうございます」を数秒で入力している様子>>

フリック入力に慣れた人なら、QWERTY キーボードより速く日本語入力できる。しかも画面サイズに関係なく一定の操作感。AR グラス環境が普及したら、歩きながらでも立ちながらでも安定した入力品質を保てそう。

### 実際の Unicode 送信フローの仕組み

現在のテキスト入力機能では、こんな流れで Unicode 文字を直接 PC 側に送信している：

<<画像：Unicode 送信フローの詳細図>>

```
【実際の送信例：「こんにちは」を送る場合】

iPhone側の処理:
1. ユーザーが「こんにちは」と入力
2. iOS IMEで変換完了：「こんにちは」
3. 各文字をUnicodeコードに変換：
   - 「こ」→ U+3053
   - 「ん」→ U+3093
   - 「に」→ U+306B
   - 「ち」→ U+3061
   - 「は」→ U+306F
4. キーシーケンスに変換：
   - "U+3053  " (Unicodeコード + 改行)
   - "U+3093  "
   - "U+306B  "
   - "U+3061  "
   - "U+306F  "

        ↓ (Bluetooth)

XIAO側の処理:
5. Bluetooth経由でキーシーケンスを受信
6. USB HIDキーコードに変換
7. PC側にキーストロークとして送信

        ↓ (USB)

PC側の処理:
8. Google日本語入力の「Unicodeから変換」機能が起動
9. "U+3053" → 「こ」に自動変換
10. 最終的にPC画面に「こんにちは」が表示
```

### 技術的なメリット

- **物理キーボードの制約を突破**: 日本語キーを持たないキーボードでも漢字入力可能
- **確実な文字再現**: Unicode 経由なので文字化けなし
- **Google 日本語入力連携**: PC 側の IME 機能をそのまま活用

<<画像：iPhone で「今日の天気は晴れです」と入力して、PC 画面に直接表示されている様子>>

### 無限の発展可能性

この革命的なアプローチなら、今まで夢物語だったことも現実になる：

- **フリック入力革命**: 物理キーボードでは絶対に不可能な、日本語特化の超高速入力
- **全言語対応 AI IME**: 英語、中国語、韓国語など、世界中の言語の AI を iPhone 1 台に統合
- **個人専用 AI 学習**: 膨大なリソースを使って、その人だけの専用 AI 文字入力システムを構築
- **リアルタイム文脈理解**: 書いている内容を理解して、次に入力したい文字を先読み提案

**この思想が普及すれば、文字入力の概念が根本的に変わる。** PC という制約から「個人の IME 能力」を完全に解放し、今まで誰も体験したことのない入力体験が実現できる。

### azooKey 開発への参加で確信した可能性

実はこのコンセプトに確信を持ったのは、[azooKey](https://zenn.dev/azookey/articles/7a2c2d20a3cc4a)というオープンソース IME の開発にちょっとだけコントリビュートした経験から。

azooKey は、Miwa さんが開発する革新的な iOS・macOS 用の日本語 IME で：

- **Neural Kana-Kanji Conversion**: 機械学習を使った文脈理解型の変換システム「Zenzai」
- **高度なカスタマイズ性**: キーボードレイアウトの自由な変更
- **クロスプラットフォーム**: iOS、macOS、Windows、Linux に対応
- **継続的進化**: 2024 年の未踏 IT 人材発掘・育成事業に採択、自然言語処理学会で若手奨励賞も受賞

azooKey の開発に少しでも関わって分かったのは、**スマートフォン上での IME 開発がいかに自由で可能性に満ちているか**ということ。PC の制約にとらわれず、潤沢なリソースを使って革新的な入力システムを作れる。

これが「持ち運べる IME」というアプローチの正しさを確信させてくれた。

## なぜこれを作ったのか

結局のところ、「手持ちのもので不便を解決したい」という単純な動機。AR デバイスが普及したときにキーボード持ち歩くのは面倒そうだけど、iPhone なら絶対持ってる。既存の技術（iPhone + Bluetooth + USB）を組み合わせるだけで、意外と新しい体験ができた。

特に面白かったのは、制約を取り除くことで今まで考えもしなかった使い方が生まれてくること。電車で立ちながら作業とか、ソファで寝ながら作業とか。

技術って、必ずしも全く新しいものを発明する必要はない。身の回りにあるものの組み合わせで、ちょっと便利になるだけでも価値がある。

## 最後に

AR デバイスが普及したときに「キーボードどうしよう」と思いそうな人なら、きっと共感してもらえると思う。完璧なソリューションではないけど、「まあ、とりあえず使えるじゃん」くらいのレベルは達成できた。

もし同じような不便を感じそうな人がいたら、試してみて欲しい。そして、もっと良いアイデアがあったら、ぜひ教えて欲しい。
